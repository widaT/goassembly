# 什么时候使用go汇编直接使用c函数

go语言官方其实不赞同我们用cgo之外的方案去调用c函数 [原文](https://groups.google.com/forum/#!topic/golang-nuts/nRMMvHxsyYQ)，因为go语言的goroutie 实现了自己的栈，这个栈比系统线程的栈空间小很多。cgo在执行的时候会预先知道
栈大小，如果栈不够会通过切换到系统栈空间上执行。自己通过汇编也可以实现类似的功能，但是我们比较难获取go_asm.h定义的常量，而且文件定义的常量每个go版本还不一样，这个有点郁闷。还有一点，cgo 会通过类似syscall类似的方式，参与goroutine调度，自己实现的调用方式也需要类似的关注点。


如下几个场景比较时候使用go汇编或者go调用c语言函数
- 对性能有比较高的要求
- 需要的函数栈比较小
- 需要的过程时间比较小